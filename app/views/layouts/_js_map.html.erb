<%= javascript_tag do %>
  function initMap() {
    var mapDiv = document.getElementById('map');
    var map = new google.maps.Map(mapDiv, {
      center: {lat: 44.540, lng: -78.546},
      zoom: 8
    });

    thePanorama = map.getStreetView();

    streetviewChangeListener = google.maps.event.addListener(thePanorama, 'visible_changed', function() {
                console.log('visible_changed ');
                console.log('streetview panorama position: ' + thePanorama.getPosition());
      });
  }
<% end %>

<div id="map">
   <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAPS'] %>&callback=initMap"
       async defer></script>
</div>
